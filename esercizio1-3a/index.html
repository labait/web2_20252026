
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>my site</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>
    <script src="https://assets.incode.it/gsap-business/minified/SplitText.min.js"></script>

    <style>
      h1 {
          color: rgb(0, 0, 0);
          font-size: 8vw;
      }
    

    .tube {
      position: relative;
      width: 100%;
      height: 24vw;
      .line {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        line-height: 1;
        margin: 0;
        letter-spacing: -0.6vw;
        font-size: 18vw;
        white-space: nowrap;
        text-align: center;
        div {
          backface-visibility: hidden;
        }
      }
    }

  

        
    </style>
    
</head>
<body>
    <section id="headline">
       <div class="container">
          <div class="tube">
            <h1 class="line line1">SplitText</h1>
            <h1 class="line line2">SplitText</h1>
            <h1 class="line line3">SplitText</h1>
            <h1 class="line line3">SplitText</h1>
          </div>
       </div>
    </section>
    <section id="section1" class="flex items-center justify-center h-screen border-2 border-red-500">
      <h1 class="font-bold">section1</h1>
    </section>
    <section id="section2" class="flex items-center justify-center h-screen border-2 border-red-500">
      <h1 class="font-bold">section2</h1>
    </section>
    <section id="section3" class="flex items-center justify-center h-screen border-2 border-red-500">
      <h1 class="font-bold">section3</h1>
    </section>

    <script>

      gsap.registerPlugin(ScrollTrigger);
      gsap.registerPlugin(SplitText);

      // Grab all lines
      const lines = document.querySelectorAll(".tube .line");

      // Split characters for all lines
      const splitLines = Array.from(lines).map(line => 
        new SplitText(line, { type: "chars", charsClass: "char" })
      );

      // 3D setup
      const width = window.innerWidth;
      const height = window.innerHeight;
      const depth = -width / 8;
      const transformOrigin = `50% 50% ${depth}`;

      gsap.set(lines, { perspective: 700, transformStyle: "preserve-3d" });

      // Timeline animation
      const animTime = 0.9;
      const tl = gsap.timeline({repeat: -1});

      // Animate each line in a loop
      splitLines.forEach((split, index) => {
        tl.fromTo(
          split.chars,
          { rotationX: -90 },
          { rotationX: 90, stagger: 0.08, duration: animTime, ease: "none", transformOrigin },
          index * 0.45 // stagger between lines
        );
      });



      // this is for only section2, done without loop
      /*
      gsap.from(
        "#section2 h1", 
        {
          x: -800, 
          opacity: 1, 
          duration: 1,
          scrollTrigger: {
            trigger: "#section2",
            // start: "top center",
            // end: "bottom center",
            scrub: true,
            markers: true,
            pin: true
          }
        }
      );
      */

     
      gsap.utils.toArray("#section1, #section2, #section3").forEach((section, index) => {
        const h1 = section.querySelector("h1");
        const tl1 = gsap.timeline({
          scrollTrigger: {
            trigger: section,
            // start: "top 80%",
            // end: "top 30%",
            // toggleActions: "play none none reverse",
            pin: true,
            markers: true,
            scrub: true,
          }
        });
        tl1.from(h1, { x: -800, opacity: 1, duration: 1 })
        tl1.to(h1, { x: 800, opacity: 0, duration: 1 }, "+=0.5")
      });

        
    </script>

</body>
</html>